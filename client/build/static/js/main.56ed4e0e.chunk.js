(this.webpackJsonpchatrooms=this.webpackJsonpchatrooms||[]).push([[0],{105:function(e,t){},121:function(e,t,n){e.exports=n(173)},132:function(e,t,n){},134:function(e,t,n){},137:function(e,t,n){},167:function(e,t){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(8),i=n.n(r),c=n(35),s=n(25),l=n(104),u={connected:!1},m=n(105),d=n.n(m),p=n(41),h=n(36),f=n(118),E={length:0,data:{}},g=Object(c.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"UPDATE_USER_ID"===t.type?Object(h.a)({},e,{id:t.payload}):e},serverConnection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;return"CONNECT_TO_SERVER"===t.type?{connected:t.payload.connected}:e},roomMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"CREATE_ROOM":case"JOIN_ROOM":return Object(h.a)({},e,Object(p.a)({},n.id,n));default:return e}},messages:d.a,notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(console.log("reducer!"),t.type){case"CREATE_NOTIFICATION":var n=t.payload,a=n.id,o=Object(f.a)(n,["id"]);return console.log("id: "+a+"\nmetadata:"),console.log(o),Object(h.a)({},e,{length:e.length+1,data:Object(h.a)({},e.data,Object(p.a)({},a,o))});default:return e}}}),b=n(9),v=n(13),O=n(16),R=n(14),S=n(17),C=n(37),k=n(43),y=n(87),j=n(116),N=n(70),M=n(108),_=n(117),w=n(74),I=n(55),F=n(56),T=function(e){var t=e.shouldShowBadge?"visible":"hidden";return o.a.createElement(I.a,{icon:F.a,size:"lg"},o.a.createElement(I.a,{icon:F.b,style:{visibility:t}}))},V=n(106),P=o.a.forwardRef((function(e,t){var n=e.children,a=e.className,r=e.style;return o.a.createElement("div",{ref:t,className:a,style:r},n)})),x=function(e){return console.log("item. title: "+e.notification.title),o.a.createElement(V.a,{as:P},"nblah abl blhjljaljgjjkfgklkjkgjkfgjfkgj")},A=(n(132),function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(O.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(r)))).getNotificationListPopover=function(){return o.a.createElement(w.a,null,o.a.createElement(w.a.Title,{as:"h2"},"Notifications"),o.a.createElement(w.a.Content,null,n.getDropdownMenuContent()))},n}return Object(S.a)(t,e),Object(v.a)(t,[{key:"getDropdownMenuContent",value:function(){var e=this.props.notifications;return 0===e.length?o.a.createElement("div",{className:"item"},"You don't have any notifications"):Object.keys(e.data).map((function(t){return o.a.createElement("div",{key:t},o.a.createElement(x,{notification:e.data[t]}),o.a.createElement("hr",null))}))}},{key:"getWrappedNotificationIcon",value:function(){return o.a.createElement("span",{className:"header-icon nav-item"},o.a.createElement(T,{shouldShowBadge:0!==this.props.notifications.length}))}},{key:"render",value:function(){return o.a.createElement(_.a,{trigger:"click",placement:"bottom",rootClose:!0,overlay:this.getNotificationListPopover()},this.getWrappedNotificationIcon())}}]),t}(o.a.Component)),J=Object(s.b)((function(e){return{notifications:e.notifications}}),null)(A),D=(n(134),{backgroundColor:"#23282d"}),B=function(){return o.a.createElement(y.a,{collapseOnSelect:!0,style:D,expand:"large",sticky:"top"},o.a.createElement(M.a,null,o.a.createElement(y.a.Brand,null,o.a.createElement(k.b,{to:"/",className:"logo"}," ChatRooms ")),o.a.createElement(j.a,{className:"justify-content-end flex-row"},o.a.createElement(k.b,{to:"/rooms",className:"header-text"},"Rooms"),o.a.createElement(J,null),o.a.createElement(N.a,{as:"span",className:"header-icon"},o.a.createElement(I.a,{icon:F.c,size:"lg"})))))},L=function(e){return o.a.createElement("div",{className:"app"},o.a.createElement(B,null),e.children)},U=(n(137),n(60)),q=n(21),H=n(193),W=n(194),z=n(110),G=n.n(z),X=n(112),Y=n.n(X),K=n(113),Q=n.n(K),Z=n(111),$=n.n(Z),ee=n(72),te=n(191),ne=Object(te.a)((function(e){return{success:{backgroundColor:ee.a[600]},error:{backgroundColor:e.palette.error.dark},message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)}}})),ae={success:G.a,warning:$.a,error:Y.a,info:Q.a},oe=function(e){if(!e.show)return null;var t=ne(),n=ae[e.variant];return o.a.createElement(H.a,{open:e.show,autoHideDuration:e.autoHideDuration||3e3,onClose:e.onClose},o.a.createElement(W.a,{className:Object(q.a)(t[e.variant]),message:o.a.createElement("span",{className:t.message},o.a.createElement(n,{className:Object(q.a)(t.icon,t.iconVariant)}),e.message),action:e.actions}))},re=function(e){return o.a.createElement(oe,{header:e.header,message:e.message,show:e.show,onClose:e.onSnackbarClose,variant:e.Variant,actions:e.actions,autoHideDuration:e.autoHideDuration||3e3})},ie=n(73),ce=n(115),se=n(52),le=function(e){return o.a.createElement(se.a,{show:e.visible,onHide:e.hideModal,centered:!0},o.a.createElement(se.a.Header,{closeButton:!0,onHide:e.hideModal},o.a.createElement(se.a.Title,null,e.header)),o.a.createElement(se.a.Body,null,e.content),o.a.createElement(se.a.Footer,null,e.actions))},ue=n(28),me=n.n(ue),de=n(114),pe=n.n(de),he={ROOM_EVENT:"event:room",ROOM_JOIN_ATTEMPT:"room_join_attempt",ROOM_JOIN_PERMISSION_SEND:"room_join_permission_send",ROOM_JOIN_PERMISSION_RECIEVE:"room_join_permission_recieve",CREATE_ROOM:"create_room",NEW_MESSAGE_RECIEVED:"new_message_recieved",SEND_MESSAGE:"send_message",USER_ID_RECIEVE:"user_id_recieve"},fe=new function e(){var t=this;Object(b.a)(this,e),this.socket=pe()("/",{reconnection:!1,autoConnect:!1}),this.connectToServer=function(e){t.socket.connect(),t.socket.on("connect_error",e),t.socket.on("connect",(function(){return console.log("connected")}))},this.sendMessage=function(e){t.socket.emit(he.SEND_MESSAGE,e)},this.onMessageRecieved=function(e){t.socket.on(he.NEW_MESSAGE_RECIEVED,e)},this.onRoomJoined=function(e){},this.onRoomJoinRequestRecieved=function(e){},this.onRoomJoinPermissionRecieved=function(e){t.socket.on(he.ROOM_EVENT,he.ROOM_JOIN_PERMISSION_RECIEVE,e)},this.onUserIdRecieved=function(e){t.socket.on(he.USER_ID_RECIEVE,e)},this.createRoom=function(e,n,a,o){return t.socket.emit(he.ROOM_EVENT,he.CREATE_ROOM,e,n,a,o)},this.joinRoom=function(e,n){return t.socket.emit(he.ROOM_EVENT,he.JOIN_ROOM,e,n)}},Ee=function(e){return{type:"CREATE_ROOM",payload:e}},ge=function(e,t,n,a){return function(o,r){return me.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,me.a.awrap(fe.createRoom(e,t,r().user.id,(function(e){"ok"===e.status?(console.log(e.room),o(Ee(e.room)),n()):a(e.reason)})));case 2:case"end":return i.stop()}}))}},be=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(O.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(o)))).state={inputValue:"",radioSelectedValue:null,isFormLoading:!1},n.updateCheckedRadioInput=function(e){n.setState({radioSelectedValue:e.target.value})},n.onFormSubmit=function(e){e.preventDefault();var t=n.state.inputValue,a=n.state.radioSelectedValue;n.props.tryCreatingRoom(t,a,n.onSuccess,n.onFailure),n.setState({isFormLoading:!0})},n.restoreInitialState=function(){n.setState({inputValue:"",radioSelectedValue:null,isFormLoading:!1})},n.onSuccess=function(){n.restoreInitialState(),n.props.onSuccess()},n.onFailure=function(e){n.restoreInitialState(),n.props.onFailure(e)},n.onTextInputChange=function(e){n.setState({inputValue:e.target.value})},n.onCancelButtonClick=function(){n.restoreInitialState(),n.props.hideModal()},n}return Object(S.a)(t,e),Object(v.a)(t,[{key:"renderRadioInputs",value:function(){var e=this;return o.a.createElement("div",{className:"required field"},o.a.createElement("label",null,"Select Room type:"),o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"ui radio checkbox"},o.a.createElement("input",{type:"radio",value:"public",name:"room-type",tabIndex:"0",required:!0,onChange:function(t){return e.updateCheckedRadioInput(t)}}),o.a.createElement("label",null,o.a.createElement("i",{className:"globe icon"})," Public"))),o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"ui radio checkbox"},o.a.createElement("input",{type:"radio",value:"unlisted",name:"room-type",tabIndex:"0",onChange:function(t){return e.updateCheckedRadioInput(t)}}),o.a.createElement("label",null,o.a.createElement("i",{className:"paperclip icon"})," Unlisted"))),o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"ui radio checkbox"},o.a.createElement("input",{type:"radio",value:"private",name:"room-type",tabIndex:"0",onChange:function(t){return e.updateCheckedRadioInput(t)}}),o.a.createElement("label",null,o.a.createElement("i",{className:"lock icon"})," Private"))))}},{key:"getModalContent",value:function(){return o.a.createElement(ie.a,{onSubmit:this.onFormSubmit,id:"create-room-form"},o.a.createElement(ie.a.Label,null,o.a.createElement("strong",null,"Enter Room Name:")),o.a.createElement(ie.a.Control,{type:"text",value:this.state.inputValue,onChange:this.onTextInputChange,required:!0}),this.renderRadioInputs())}},{key:"renderCreateRoomButton",value:function(){var e=o.a.createElement(ce.a,{style:{marginRight:"10px"},as:"span",animation:"border",role:"status",size:"sm"}),t=this.state.isFormLoading?"disabled":"";return o.a.createElement("button",{type:"submit",className:"ui button orange ".concat(t),form:"create-room-form"},this.state.isFormLoading?e:null,"Create")}},{key:"getModalActions",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"ui button",onClick:this.onCancelButtonClick},"Cancel"),this.renderCreateRoomButton())}},{key:"render",value:function(){return o.a.createElement(le,Object.assign({header:"Create Room",actions:this.getModalActions(),content:this.getModalContent()},this.props))}}]),t}(o.a.Component),ve=Object(s.b)(null,{tryCreatingRoom:ge})(be),Oe=function(e,t,n,a,o){return function(r){return me.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,me.a.awrap(fe.joinRoom(e,(function(e){"ok"===e.status?(r({type:"JOIN_ROOM",payload:e.room}),t()):"permission_pending"===e.status?(n(),fe.onRoomJoinPermissionRecieved(a)):o(e.reason)})));case 2:case"end":return i.stop()}}))}},Re=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(O.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(o)))).state={inputValue:"",isFormLoading:!1},n.onFormSubmit=function(e){e.preventDefault(),n.setState({isFormLoading:!0}),n.props.tryJoiningRoom(n.state.inputValue,n.props.onSuccess,n.props.onPermissionPending,n.props.onJoinRoomPermissionRecieved,n.props.onFailure)},n.inputChanged=function(e){n.setState({inputValue:e.target.value,errorMessage:null})},n.onCancelButtonClick=function(){n.setState({inputValue:"",isFormLoading:!1}),n.props.hideModal()},n}return Object(S.a)(t,e),Object(v.a)(t,[{key:"getModalActions",value:function(){var e=this.state.isFormLoading?"disabled":"";return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"ui button",onClick:this.onCancelButtonClick},"Cancel"),o.a.createElement("button",{type:"submit",form:"join-room-form",className:"ui button orange ".concat(e)},"Join"))}},{key:"getModalContent",value:function(){var e=this.state.isFormLoading?"loading":"";return o.a.createElement("form",{className:"ui form ".concat(e),id:"join-room-form",onSubmit:this.onFormSubmit},o.a.createElement("div",{className:"required field"},o.a.createElement("label",null,"Enter Room ID:"),o.a.createElement("input",{type:"text",placeholder:"Room Number",value:this.state.inputValue,onChange:this.inputChanged,autoFocus:!0,required:!0})))}},{key:"render",value:function(){return o.a.createElement(le,Object.assign({header:"Join Room",actions:this.getModalActions(),content:this.getModalContent()},this.props))}}]),t}(o.a.Component),Se=Object(s.b)(null,{tryJoiningRoom:Oe})(Re),Ce=function(e){return"create"===e.name?o.a.createElement(ve,e):o.a.createElement(Se,e)},ke=function(e){return o.a.createElement("div",{className:"landing-page"},o.a.createElement("div",{className:"inner-wrapper"},o.a.createElement("p",null,"Welcome to Chatrooms!"),o.a.createElement("div",{className:"buttons-container"},o.a.createElement(U.a,{onClick:e.onCreateRoomButtonClick},"Create Room"),o.a.createElement(U.a,{onClick:e.onJoinRoomButtonClick},"Join Room"))),o.a.createElement(Ce,e.modalProps),o.a.createElement(re,e.snackbarProps))},ye=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(O.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(o)))).state={shouldShowSnackbar:!1,snackbarMessage:"",snackbarVariant:"info",shouldShowModal:!1,modalName:null},n.capitalizeFirstWord=function(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)},n.getSuccessMessage=function(e){switch(e){case"create-room":return"Room created Successfully!";case"join-room":return"Room joined Successfully!";default:return"Operation Successful!"}},n.getFailureMessage=function(e,t){switch(t=n.capitalizeFirstWord(t),e){case"create-room":return"Failed to create Room! Reason: ".concat(t);case"join-room":return"Failed to join Room! Reason: ".concat(t);default:return"Operation Failed!"}},n.onSuccess=function(e){console.log("landing page on success callback"),n.hideModal();var t=n.getSuccessMessage(e);n.showSnackbar("success",t)},n.onFailure=function(e,t){console.log("landing page on failure callback"),n.hideModal();var a=n.getFailureMessage(e,t);n.showSnackbar("error",a)},n.onJoinRoomPermissionPending=function(){console.log("mewo"),n.showSnackbar("info","Private Room. Waiting for permission from Room owner")},n.onJoinRoomPermissionRecieved=function(e){"ok"===e?(n.hideModal(),n.showSnackbar("success","Room access permission granted!")):(n.hideModal(),n.showSnackbar("error","Room access permission rejected!"))},n.showModal=function(e){n.setState({shouldShowModal:!0,modalName:e})},n.hideModal=function(){n.setState({shouldShowModal:!1})},n.showSnackbar=function(e,t){n.setState({shouldShowSnackbar:!0,snackbarVariant:e,snackbarMessage:t})},n.onSnackbarClose=function(){n.setState({shouldShowSnackbar:!1,snackbarVariant:"info",snackbarMessage:""})},n}return Object(S.a)(t,e),Object(v.a)(t,[{key:"getModalProps",value:function(){return{name:this.state.modalName,hideModal:this.hideModal,visible:this.state.shouldShowModal,onSuccess:this.onSuccess,onFailure:this.onFailure,onPermissionPending:this.onJoinRoomPermissionPending}}},{key:"getSnackbarProps",value:function(){return{onClose:this.onSnackbarClose}}},{key:"render",value:function(){var e=this;return o.a.createElement(ke,{modalProps:this.getModalProps(),onCreateRoomButtonClick:function(){return e.showModal("create")},onJoinRoomButtonClick:function(){return e.showModal("join")}})}}]),t}(o.a.Component),je=(n(170),function(){return console.log("component connection failed"),o.a.createElement("div",{className:"connection-failed"},"Oops! Unable to connect to the server. Please visit later")}),Ne=(n(171),function(){return o.a.createElement("div",{className:"error-404"},"Error 404: Page Not Found.",o.a.createElement(k.b,{to:"/"},o.a.createElement(U.a,null,"Home")))}),Me=(n(172),function(e){function t(){return Object(b.a)(this,t),Object(O.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(S.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"room-list-container"},"RoomListContainer")}}]),t}(o.a.Component)),_e=function(e){return o.a.createElement(k.a,null,o.a.createElement(L,null,e.serverConnectionFailed?o.a.createElement(je,null):o.a.createElement(C.c,null,o.a.createElement(C.a,{exact:!0,path:"/",component:ye}),o.a.createElement(C.a,{exact:!0,path:"/rooms",component:Me}),o.a.createElement(C.a,{exact:!0,path:"*",component:Ne}))))},we=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(O.a)(this,(e=Object(R.a)(t)).call.apply(e,[this].concat(o)))).state={serverConnectionFailed:!1},n.onServerConnectionFailed=function(){n.setState({serverConnectionFailed:!0})},n}return Object(S.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.connectToServer(this.onServerConnectionFailed),fe.onUserIdRecieved((function(t){return e.props.updateUserId(t)})),fe.onRoomJoinRequestRecieved((function(t){console.log(t+" wants to join your room"),e.props.createNotification("Room join request",t+" wants to join your room",null)}))}},{key:"render",value:function(){return o.a.createElement(_e,this.state)}}]),t}(o.a.Component),Ie=Object(s.b)(null,{connectToServer:function(e){return function(t){return me.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me.a.awrap(fe.connectToServer(e));case 2:t({type:"CONNECT_TO_SERVER",payload:{connected:!0}});case 3:case"end":return n.stop()}}))}},updateUserId:function(e){return console.log("update user id: "+e),{type:"UPDATE_USER_ID",payload:e}},createNotification:function(e,t,n){var a={type:"CREATE_NOTIFICATION",payload:{id:"id",title:e,content:t,actions:n}};return console.log("action: "),console.log(a),a}})(we),Fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,Te=Object(c.e)(g,Fe(Object(c.a)(l.a)));i.a.render(o.a.createElement(s.a,{store:Te},o.a.createElement(Ie,null)),document.querySelector("#root"))}},[[121,1,2]]]);
//# sourceMappingURL=main.56ed4e0e.chunk.js.map