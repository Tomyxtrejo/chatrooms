(this.webpackJsonpchatrooms=this.webpackJsonpchatrooms||[]).push([[0],{105:function(e,t){},121:function(e,t,n){e.exports=n(173)},132:function(e,t,n){},134:function(e,t,n){},137:function(e,t,n){},167:function(e,t){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(8),c=n.n(r),i=n(35),s=n(25),l=n(104),u={connected:!1},m=n(105),d=n.n(m),p=n(41),h=n(36),f=n(118),g={length:0,data:{}},b=Object(i.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"UPDATE_USER_ID"===t.type?Object(h.a)({},e,{id:t.payload}):e},serverConnection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;return"CONNECT_TO_SERVER"===t.type?{connected:t.payload.connected}:e},roomMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case"CREATE_ROOM":case"JOIN_ROOM":return Object(h.a)({},e,Object(p.a)({},n.id,n));default:return e}},messages:d.a,notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(console.log("reducer!"),t.type){case"CREATE_NOTIFICATION":var n=t.payload,a=n.id,o=Object(f.a)(n,["id"]);return console.log("id: "+a+"\nmetadata:"),console.log(o),Object(h.a)({},e,{length:e.length+1,data:Object(h.a)({},e.data,Object(p.a)({},a,o))});default:return e}}}),v=n(9),E=n(13),k=n(16),C=n(14),y=n(17),R=n(37),j=n(43),O=n(87),S=n(116),N=n(70),w=n(108),M=n(117),F=n(74),_=n(55),I=n(56),P=function(e){var t=e.shouldShowBadge?"visible":"hidden";return o.a.createElement(_.a,{icon:I.a,size:"lg"},o.a.createElement(_.a,{icon:I.b,style:{visibility:t}}))},x=n(106),T=o.a.forwardRef((function(e,t){var n=e.children,a=e.className,r=e.style;return o.a.createElement("div",{ref:t,className:a,style:r},n)})),V=function(e){return console.log("item. title: "+e.notification.title),o.a.createElement(x.a,{as:T},"nblah abl blhjljaljgjjkfgklkjkgjkfgjfkgj")},J=(n(132),function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(k.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).getNotificationListPopover=function(){return o.a.createElement(F.a,null,o.a.createElement(F.a.Title,{as:"h2"},"Notifications"),o.a.createElement(F.a.Content,null,n.getDropdownMenuContent()))},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"getDropdownMenuContent",value:function(){var e=this.props.notifications;return 0===e.length?o.a.createElement("div",{className:"item"},"You don't have any notifications"):Object.keys(e.data).map((function(t){return o.a.createElement("div",{key:t},o.a.createElement(V,{notification:e.data[t]}),o.a.createElement("hr",null))}))}},{key:"getWrappedNotificationIcon",value:function(){return o.a.createElement("span",{className:"header-icon nav-item"},o.a.createElement(P,{shouldShowBadge:0!==this.props.notifications.length}))}},{key:"render",value:function(){return o.a.createElement(M.a,{trigger:"click",placement:"bottom",rootClose:!0,overlay:this.getNotificationListPopover()},this.getWrappedNotificationIcon())}}]),t}(o.a.Component)),A=Object(s.b)((function(e){return{notifications:e.notifications}}),null)(J),D=(n(134),{backgroundColor:"#23282d"}),B=function(){return o.a.createElement(O.a,{collapseOnSelect:!0,style:D,expand:"large",sticky:"top"},o.a.createElement(w.a,null,o.a.createElement(O.a.Brand,null,o.a.createElement(j.b,{to:"/",className:"logo"}," ChatRooms ")),o.a.createElement(S.a,{className:"justify-content-end flex-row"},o.a.createElement(j.b,{to:"/rooms",className:"header-text"},"Rooms"),o.a.createElement(A,null),o.a.createElement(N.a,{as:"span",className:"header-icon"},o.a.createElement(_.a,{icon:I.c,size:"lg"})))))},L=function(e){return o.a.createElement("div",{className:"app"},o.a.createElement(B,null),e.children)},U=(n(137),n(60)),q=n(21),H=n(193),z=n(194),W=n(110),X=n.n(W),Y=n(112),G=n.n(Y),K=n(113),Q=n.n(K),Z=n(111),$=n.n(Z),ee=n(72),te=n(191),ne=Object(te.a)((function(e){return{success:{backgroundColor:ee.a[600]},error:{backgroundColor:e.palette.error.dark},message:{display:"flex",alignItems:"center"},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)}}})),ae={success:X.a,warning:$.a,error:G.a,info:Q.a},oe=function(e){if(!e.show)return null;var t=ne(),n=ae[e.variant];return o.a.createElement(H.a,{open:e.show,autoHideDuration:e.autoHideDuration||3e3,onClose:e.onClose},o.a.createElement(z.a,{className:Object(q.a)(t[e.variant]),message:o.a.createElement("span",{className:t.message},o.a.createElement(n,{className:Object(q.a)(t.icon,t.iconVariant)}),e.message),action:e.actions}))},re=function(e){return o.a.createElement(oe,{header:e.header,message:e.message,show:e.show,onClose:e.onSnackbarClose,variant:e.Variant,actions:e.actions,autoHideDuration:e.autoHideDuration||3e3})},ce=n(73),ie=n(115),se=n(52),le=function(e){return o.a.createElement(se.a,{show:e.visible,onHide:e.hideModal,centered:!0},o.a.createElement(se.a.Header,{closeButton:!0,onHide:e.hideModal},o.a.createElement(se.a.Title,null,e.header)),o.a.createElement(se.a.Body,null,e.content),o.a.createElement(se.a.Footer,null,e.actions))},ue=n(28),me=n.n(ue),de=n(114),pe=n.n(de),he=new function e(){var t=this;Object(v.a)(this,e),this.socket=pe()("http://localhost:8000",{reconnection:!1,autoConnect:!1}),this.connectToServer=function(e){t.socket.connect(),t.socket.on("connect_error",e),t.socket.on("connect",(function(){return console.log("connected")}))},this.sendMessage=function(e){t.socket.emit("send_message",e)},this.onMessageRecieved=function(e){t.socket.on("new_message_recieved",e)},this.onRoomJoined=function(e){t.socket.on("room_joined",e)},this.onRoomJoinRequestRecieved=function(e){t.socket.on("room_join_request",e)},this.onRoomJoinPermissionRecieved=function(e){t.socket.on("room_join_permission_recieve",e)},this.onUserIdRecieved=function(e){t.socket.on("user_id_recieve",e)},this.createRoom=function(e,n,a,o){return t.socket.emit("create_room",e,n,a,o)},this.joinRoom=function(e,n){return t.socket.emit("join_room",e,n)}},fe=function(e){return{type:"CREATE_ROOM",payload:e}},ge=function(e,t,n,a){return function(o,r){return me.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,me.a.awrap(he.createRoom(e,t,r().user.id,(function(e){"ok"===e.status?(console.log(e.room),o(fe(e.room)),n()):a(e.reason)})));case 2:case"end":return c.stop()}}))}},be=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(k.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(o)))).state={inputValue:"",radioSelectedValue:null,isFormLoading:!1},n.updateCheckedRadioInput=function(e){n.setState({radioSelectedValue:e.target.value})},n.onFormSubmit=function(e){e.preventDefault();var t=n.state.inputValue,a=n.state.radioSelectedValue;n.props.tryCreatingRoom(t,a,n.onSuccess,n.onFailure),n.setState({isFormLoading:!0})},n.restoreInitialState=function(){n.setState({inputValue:"",radioSelectedValue:null,isFormLoading:!1})},n.onSuccess=function(){n.restoreInitialState(),n.props.onSuccess()},n.onFailure=function(e){n.restoreInitialState(),n.props.onFailure(e)},n.onTextInputChange=function(e){n.setState({inputValue:e.target.value})},n.onCancelButtonClick=function(){n.restoreInitialState(),n.props.hideModal()},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"renderRadioInputs",value:function(){var e=this;return o.a.createElement("div",{className:"required field"},o.a.createElement("label",null,"Select Room type:"),o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"ui radio checkbox"},o.a.createElement("input",{type:"radio",value:"public",name:"room-type",tabIndex:"0",required:!0,onChange:function(t){return e.updateCheckedRadioInput(t)}}),o.a.createElement("label",null,o.a.createElement("i",{className:"globe icon"})," Public"))),o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"ui radio checkbox"},o.a.createElement("input",{type:"radio",value:"unlisted",name:"room-type",tabIndex:"0",onChange:function(t){return e.updateCheckedRadioInput(t)}}),o.a.createElement("label",null,o.a.createElement("i",{className:"paperclip icon"})," Unlisted"))),o.a.createElement("div",{className:"field"},o.a.createElement("div",{className:"ui radio checkbox"},o.a.createElement("input",{type:"radio",value:"private",name:"room-type",tabIndex:"0",onChange:function(t){return e.updateCheckedRadioInput(t)}}),o.a.createElement("label",null,o.a.createElement("i",{className:"lock icon"})," Private"))))}},{key:"getModalContent",value:function(){return o.a.createElement(ce.a,{onSubmit:this.onFormSubmit,id:"create-room-form"},o.a.createElement(ce.a.Label,null,o.a.createElement("strong",null,"Enter Room Name:")),o.a.createElement(ce.a.Control,{type:"text",value:this.state.inputValue,onChange:this.onTextInputChange,required:!0}),this.renderRadioInputs())}},{key:"renderCreateRoomButton",value:function(){var e=o.a.createElement(ie.a,{style:{marginRight:"10px"},as:"span",animation:"border",role:"status",size:"sm"}),t=this.state.isFormLoading?"disabled":"";return o.a.createElement("button",{type:"submit",className:"ui button orange ".concat(t),form:"create-room-form"},this.state.isFormLoading?e:null,"Create")}},{key:"getModalActions",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"ui button",onClick:this.onCancelButtonClick},"Cancel"),this.renderCreateRoomButton())}},{key:"render",value:function(){return o.a.createElement(le,Object.assign({header:"Create Room",actions:this.getModalActions(),content:this.getModalContent()},this.props))}}]),t}(o.a.Component),ve=Object(s.b)(null,{tryCreatingRoom:ge})(be),Ee=function(e,t,n,a,o){return function(r){return me.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,me.a.awrap(he.joinRoom(e,(function(e){"ok"===e.status?(r({type:"JOIN_ROOM",payload:e.room}),t()):"permission_pending"===e.status?(n(),he.onRoomJoinPermissionRecieved(a)):o(e.reason)})));case 2:case"end":return c.stop()}}))}},ke=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(k.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(o)))).state={inputValue:"",isFormLoading:!1},n.onFormSubmit=function(e){e.preventDefault(),n.setState({isFormLoading:!0}),n.props.tryJoiningRoom(n.state.inputValue,n.props.onSuccess,n.props.onPermissionPending,n.props.onJoinRoomPermissionRecieved,n.props.onFailure)},n.inputChanged=function(e){n.setState({inputValue:e.target.value,errorMessage:null})},n.onCancelButtonClick=function(){n.setState({inputValue:"",isFormLoading:!1}),n.props.hideModal()},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"getModalActions",value:function(){var e=this.state.isFormLoading?"disabled":"";return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"ui button",onClick:this.onCancelButtonClick},"Cancel"),o.a.createElement("button",{type:"submit",form:"join-room-form",className:"ui button orange ".concat(e)},"Join"))}},{key:"getModalContent",value:function(){var e=this.state.isFormLoading?"loading":"";return o.a.createElement("form",{className:"ui form ".concat(e),id:"join-room-form",onSubmit:this.onFormSubmit},o.a.createElement("div",{className:"required field"},o.a.createElement("label",null,"Enter Room ID:"),o.a.createElement("input",{type:"text",placeholder:"Room Number",value:this.state.inputValue,onChange:this.inputChanged,autoFocus:!0,required:!0})))}},{key:"render",value:function(){return o.a.createElement(le,Object.assign({header:"Join Room",actions:this.getModalActions(),content:this.getModalContent()},this.props))}}]),t}(o.a.Component),Ce=Object(s.b)(null,{tryJoiningRoom:Ee})(ke),ye=function(e){return"create"===e.name?o.a.createElement(ve,e):o.a.createElement(Ce,e)},Re=function(e){return o.a.createElement("div",{className:"landing-page"},o.a.createElement("div",{className:"inner-wrapper"},o.a.createElement("p",null,"Welcome to Chatrooms!"),o.a.createElement("div",{className:"buttons-container"},o.a.createElement(U.a,{onClick:e.onCreateRoomButtonClick},"Create Room"),o.a.createElement(U.a,{onClick:e.onJoinRoomButtonClick},"Join Room"))),o.a.createElement(ye,e.modalProps),o.a.createElement(re,e.snackbarProps))},je=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(k.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(o)))).state={shouldShowSnackbar:!1,snackbarMessage:"",snackbarVariant:"info",shouldShowModal:!1,modalName:null},n.capitalizeFirstWord=function(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)},n.getSuccessMessage=function(e){switch(e){case"create-room":return"Room created Successfully!";case"join-room":return"Room joined Successfully!";default:return"Operation Successful!"}},n.getFailureMessage=function(e,t){switch(t=n.capitalizeFirstWord(t),e){case"create-room":return"Failed to create Room! Reason: ".concat(t);case"join-room":return"Failed to join Room! Reason: ".concat(t);default:return"Operation Failed!"}},n.onSuccess=function(e){console.log("landing page on success callback"),n.hideModal();var t=n.getSuccessMessage(e);n.showSnackbar("success",t)},n.onFailure=function(e,t){console.log("landing page on failure callback"),n.hideModal();var a=n.getFailureMessage(e,t);n.showSnackbar("error",a)},n.onJoinRoomPermissionPending=function(){console.log("mewo"),n.showSnackbar("info","Private Room. Waiting for permission from Room owner")},n.onJoinRoomPermissionRecieved=function(e){"ok"===e?(n.hideModal(),n.showSnackbar("success","Room access permission granted!")):(n.hideModal(),n.showSnackbar("error","Room access permission rejected!"))},n.showModal=function(e){n.setState({shouldShowModal:!0,modalName:e})},n.hideModal=function(){n.setState({shouldShowModal:!1})},n.showSnackbar=function(e,t){n.setState({shouldShowSnackbar:!0,snackbarVariant:e,snackbarMessage:t})},n.onSnackbarClose=function(){n.setState({shouldShowSnackbar:!1,snackbarVariant:"info",snackbarMessage:""})},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"getModalProps",value:function(){return{name:this.state.modalName,hideModal:this.hideModal,visible:this.state.shouldShowModal,onSuccess:this.onSuccess,onFailure:this.onFailure,onPermissionPending:this.onJoinRoomPermissionPending}}},{key:"getSnackbarProps",value:function(){return{onClose:this.onSnackbarClose}}},{key:"render",value:function(){var e=this;return o.a.createElement(Re,{modalProps:this.getModalProps(),onCreateRoomButtonClick:function(){return e.showModal("create")},onJoinRoomButtonClick:function(){return e.showModal("join")}})}}]),t}(o.a.Component),Oe=(n(170),function(){return console.log("component connection failed"),o.a.createElement("div",{className:"connection-failed"},"Oops! Unable to connect to the server. Please visit later")}),Se=(n(171),function(){return o.a.createElement("div",{className:"error-404"},"Error 404: Page Not Found.",o.a.createElement(j.b,{to:"/"},o.a.createElement(U.a,null,"Home")))}),Ne=(n(172),function(e){function t(){return Object(v.a)(this,t),Object(k.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"room-list-container"},"RoomListContainer")}}]),t}(o.a.Component)),we=function(e){return o.a.createElement(j.a,null,o.a.createElement(L,null,e.serverConnectionFailed?o.a.createElement(Oe,null):o.a.createElement(R.c,null,o.a.createElement(R.a,{exact:!0,path:"/",component:je}),o.a.createElement(R.a,{exact:!0,path:"/rooms",component:Ne}),o.a.createElement(R.a,{exact:!0,path:"*",component:Se}))))},Me=function(e){function t(){var e,n;Object(v.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(k.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(o)))).state={serverConnectionFailed:!1},n.onServerConnectionFailed=function(){n.setState({serverConnectionFailed:!0})},n}return Object(y.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.connectToServer(this.onServerConnectionFailed),he.onUserIdRecieved((function(t){return e.props.updateUserId(t)})),he.onRoomJoinRequestRecieved((function(t){console.log(t+" wants to join your room"),e.props.createNotification("Room join request",t+" wants to join your room",null)}))}},{key:"render",value:function(){return o.a.createElement(we,this.state)}}]),t}(o.a.Component),Fe=Object(s.b)(null,{connectToServer:function(e){return function(t){return me.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me.a.awrap(he.connectToServer(e));case 2:t({type:"CONNECT_TO_SERVER",payload:{connected:!0}});case 3:case"end":return n.stop()}}))}},updateUserId:function(e){return console.log("update user id: "+e),{type:"UPDATE_USER_ID",payload:e}},createNotification:function(e,t,n){var a={type:"CREATE_NOTIFICATION",payload:{id:"id",title:e,content:t,actions:n}};return console.log("action: "),console.log(a),a}})(Me),_e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,Ie=Object(i.e)(b,_e(Object(i.a)(l.a)));c.a.render(o.a.createElement(s.a,{store:Ie},o.a.createElement(Fe,null)),document.querySelector("#root"))}},[[121,1,2]]]);
//# sourceMappingURL=main.5d856a27.chunk.js.map